<?xml version="1.0" encoding="utf-8" ?>
<Patch>

  <!-- Make vanilla grav engine link with our facilities. -->
  <Operation Class="PatchOperationAdd">
    <xpath>Defs/ThingDef[defName="GravEngine"]/comps/li[@Class="CompProperties_AffectedByFacilities"]/linkableFacilities</xpath>
    <value>
      <li>VGE_OxygenReclaimer</li>
      <li>VGE_SmallHeatsink</li>
      <li>VGE_LargeHeatsink</li>
      <li>VGE_GravheatAbsorber</li>
      <li>VGE_GravFieldAmplifier</li>
      <li>VGE_GiantThruster</li>
      <li>VGE_GunnerSubpersonaCore</li>
      <li>VGE_GravtechConsole</li>
    </value>
  </Operation>

  <!-- Make grav engine affected by constant gravship bonuses (bonuses from connected, but potentially inactive facilities). -->
  <Operation Class="PatchOperationAdd">
    <xpath>Defs/ThingDef[defName="GravEngine"]/comps</xpath>
    <value>
      <li>
        <compClass>VanillaGravshipExpanded.CompAffectedByConstantGravshipFacilityBonus</compClass>
      </li>
    </value>
  </Operation>

  <Operation Class="PatchOperationAdd">
    <xpath>Defs/ThingDef[defName="GravEngine"]/comps</xpath>
    <value>
      <li Class="VanillaGravshipExpanded.CompProperties_GravMaintainable">

      </li>
      <li Class="CompProperties_Breakdownable" />
    </value>
  </Operation>

  <Operation Class="PatchOperationAdd">
    <xpath>Defs/ThingDef[defName="GravEngine"]/statBases</xpath>
    <value>
      <VGE_MaintenanceSensitivity>3</VGE_MaintenanceSensitivity>
    </value>
  </Operation>

</Patch>
